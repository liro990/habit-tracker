<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìŠµê´€ ì¶”ì ê¸°</title>
    <link rel="manifest" href="manifest.json" />
    <style>
      body {
        font-family: 'Arial', sans-serif;
        padding: 20px;
        background-color: #f5f5f5;
        transition: background-color 0.3s, color 0.3s;
      }

      .dark-mode {
        background-color: #1e1e1e;
        color: #fff;
      }

      input[type="text"] {
        padding: 10px;
        width: 70%;
        font-size: 1rem;
      }

      button {
        padding: 10px;
        font-size: 1rem;
        margin-left: 5px;
      }

      ul {
        list-style: none;
        padding: 0;
      }

      li.habit {
        display: flex;
        align-items: center;
        margin-top: 10px;
      }

      li.habit span {
        margin-left: 10px;
      }

      .hint {
        font-size: 0.9rem;
        color: #777;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1>ìŠµê´€ ì¶”ì ê¸°</h1>

    <button id="darkModeToggle">ğŸŒ™ ë‹¤í¬ëª¨ë“œ</button>

    <input id="habitInput" type="text" placeholder="ì˜¤ëŠ˜ì˜ ìŠµê´€ì„ ì…ë ¥í•˜ì„¸ìš”..." />
    <button onclick="addHabit()">ì¶”ê°€</button>

    <p class="hint">ì˜ˆ: â€œë¬¼ 1ë¦¬í„° ë§ˆì‹œê¸°â€, â€œ10ë¶„ ìŠ¤íŠ¸ë ˆì¹­â€</p>

    <ul id="habitList"></ul>

    <script>
      // ë‚ ì§œ í‚¤ ìƒì„±
      function getTodayKey() {
        return new Date().toLocaleDateString(); // ì˜ˆ: "2025. 6. 29"
      }

      // ì €ì¥ëœ ìŠµê´€ ë¶ˆëŸ¬ì˜¤ê¸°
      function loadHabits() {
        const todayKey = getTodayKey();
        const stored = localStorage.getItem(todayKey);
        if (stored) {
          const habits = JSON.parse(stored);
          for (let text of habits) {
            createHabitItem(text);
          }
        }
      }

      // ìŠµê´€ í•­ëª© ìƒì„±
      function createHabitItem(text) {
        const li = document.createElement("li");
        li.className = "habit";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";

        const span = document.createElement("span");
        span.textContent = text;

        li.appendChild(checkbox);
        li.appendChild(span);
        document.getElementById("habitList").appendChild(li);
      }

      // ìŠµê´€ ì¶”ê°€ ë° ì €ì¥
      function addHabit() {
        const input = document.getElementById("habitInput");
        const text = input.value.trim();
        if (text !== "") {
          createHabitItem(text);

          const todayKey = getTodayKey();
          const stored = localStorage.getItem(todayKey);
          const habits = stored ? JSON.parse(stored) : [];
          habits.push(text);
          localStorage.setItem(todayKey, JSON.stringify(habits));

          input.value = "";
        }
      }

      // ë‹¤í¬ëª¨ë“œ í† ê¸€
      const toggle = document.getElementById("darkModeToggle");
      toggle.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
      });

      // ì‹œì‘ ì‹œ ì˜¤ëŠ˜ ìŠµê´€ ë¶ˆëŸ¬ì˜¤ê¸°
      window.onload = loadHabits;
    </script>
  </body>
</html>

